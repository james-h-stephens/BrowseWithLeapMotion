BrowseWithLeap = function () { function e(e, n) { for (var t = 0; t < e.length; t++)if (e[t].type === n) return e[t]; return null } function n(e) { if (i(e)) { var n = e.pitch(); n < p.scrollDownBounds[0] && (n = Math.max(n, p.scrollDownBounds[1]), o((n - p.scrollDownBounds[0]) / (p.scrollDownBounds[1] - p.scrollDownBounds[0]))), n > p.scrollUpBounds[0] && (n = Math.min(n, p.scrollUpBounds[1]), t((n - p.scrollUpBounds[0]) / (p.scrollUpBounds[1] - p.scrollUpBounds[0]))) } } function t(e) { window.scrollBy(0, -p.scrollMax * e) } function o(e) { window.scrollBy(0, +p.scrollMax * e) } function i(e) { return e.fingers[0].extended && e.fingers[1].extended && e.fingers[2].extended && e.fingers[3].extended && e.fingers[4].extended } function r(e, n, t) { if (l(n)) c(d(e, n), t, p.pointerColor); else if (s(n)) { var o = d(e, n); if (c(o, t, p.clickerColor), x) { var i = u(o); i && (i.click(), x = !1, window.setTimeout(function () { x = !0 }, p.clickDelay)) } } else f(t) } function l(e) { return !e.fingers[0].extended && e.fingers[1].extended && !e.fingers[2].extended && !e.fingers[3].extended && !e.fingers[4].extended } function s(e) { return e.fingers[0].extended && e.fingers[1].extended && !e.fingers[2].extended && !e.fingers[3].extended && !e.fingers[4].extended } function d(e, n) { var t = e.normalizePoint(n.fingers[1].tipPosition), o = window.innerHeight, i = window.innerWidth, r = a(), l = 50 * (1 - Math.min(.6, Math.max(0, Math.abs(t[2] - .5)))); return [t[0] * i + r.left + l / 2, (1 - t[1]) * o + r.top + l / 2, l] } function c(e, n, t) { n.style.background = t, n.style.left = e[0] + "px", n.style.top = e[1] + "px", n.style.width = e[2] + "px", n.style.height = e[2] + "px", n.style.position = "absolute", n.style["border-radius"] = "50%", n.style["z-index"] = 1e4, n.style.visibility = "visible" } function a() { var e = document.documentElement; return { left: (window.pageXOffset || e.scrollLeft) - (e.clientLeft || 0), top: (window.pageYOffset || e.scrollTop) - (e.clientTop || 0) } } function f(e) { e.style.visibility = "hidden" } function u(e) { var n = null, t = a(), o = document.elementFromPoint(e[0] - t.left, e[1] - t.top); if (o) if ("a" === o.tagName.toLowerCase()) n = o; else { var i = o.getElementsByTagName("a"); i.length > 0 && (n = i[0]) } return n } var p = { scrollMax: 50, scrollHand: "right", scrollDownBounds: [-.25, -.6], scrollUpBounds: [.5, 1], pointerColor: "rgba(255,0,0,.5)", clickerColor: "rgba(0,0,255,.5)", clickDelay: 1e3 }, g = function (e) { e = !!e }, h = function () { }, w = function () { }, v = function () { }, x = !0, m = !0; return document.addEventListener("DOMContentLoaded", function () { if (m && Leap) { var t = document.createElement("div"); t.id = "pointer", document.body.insertBefore(t, document.body.firstChild); var o = (document.getElementById("status"), Leap.loop(null, function (o) { if (o.hands.length > 0) { var i = e(o.hands, BrowseWithLeap.Settings.scrollHand); i && (n(i), r(o.interactionBox, i, t)) } else f(t) })); o.on("deviceAttached", function () { BrowseWithLeap.DeviceAttached() }), o.on("deviceStreaming", function () { BrowseWithLeap.DeviceStreaming() }), o.on("deviceStopped", function () { BrowseWithLeap.DeviceStopped() }) } }), { Settings: p, Enable: g, DeviceAttached: h, DeviceStreaming: w, DeviceStopped: v } }();